(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{412:function(e,t,n){"use strict";n.r(t);var i=n(0);const s=i.default.prototype.$isServer,o=/([\:\-\_]+(.))/g,a=/^moz([A-Z])/,l=s?0:Number(document.documentMode),r=function(e){return e.replace(o,(function(e,t,n,i){return i?n.toUpperCase():n})).replace(a,"Moz$1")},c=!s&&document.addEventListener?function(e,t,n){e&&t&&n&&e.addEventListener(t,n,!1)}:function(e,t,n){e&&t&&n&&e.attachEvent("on"+t,n)},d=!s&&document.removeEventListener?function(e,t,n){e&&t&&e.removeEventListener(t,n,!1)}:function(e,t,n){e&&t&&e.detachEvent("on"+t,n)};function u(e,t){if(!e||!t)return!1;if(-1!==t.indexOf(" "))throw new Error("className should not contain space.");return e.classList?e.classList.contains(t):(" "+e.className+" ").indexOf(" "+t+" ")>-1}function h(e,t){if(e){for(var n=e.className,i=(t||"").split(" "),s=0,o=i.length;s<o;s++){var a=i[s];a&&(e.classList?e.classList.add(a):u(e,a)||(n+=" "+a))}e.classList||e.setAttribute("class",n)}}function m(e,t){if(e&&t){for(var n=t.split(" "),i=" "+e.className+" ",s=0,o=n.length;s<o;s++){var a=n[s];a&&(e.classList?e.classList.remove(a):u(e,a)&&(i=i.replace(" "+a+" "," ")))}e.classList||e.setAttribute("class",(i||"").replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,""))}}const f=l<9?function(e,t){if(!s){if(!e||!t)return null;"float"===(t=r(t))&&(t="styleFloat");try{switch(t){case"opacity":try{return e.filters.item("alpha").opacity/100}catch(e){return 1}default:return e.style[t]||e.currentStyle?e.currentStyle[t]:null}}catch(n){return e.style[t]}}}:function(e,t){if(!s){if(!e||!t)return null;"float"===(t=r(t))&&(t="cssFloat");try{var n=document.defaultView.getComputedStyle(e,"");return e.style[t]||n?n[t]:null}catch(n){return e.style[t]}}};let p=e=>e&&"[object Function]"==={}.toString.call(e);"object"==typeof Int8Array||!i.default.prototype.$isServer&&document.childNodes;Object.prototype.hasOwnProperty;function g(e){let t=!1;return function(...n){t||(t=!0,window.requestAnimationFrame(i=>{e.apply(this,n),t=!1}))}}let v,_=!1,y=!1;const w=function(){if(i.default.prototype.$isServer)return;let e=x.modalDom;return e?_=!0:(_=!1,e=document.createElement("div"),x.modalDom=e,e.addEventListener("touchmove",(function(e){e.preventDefault(),e.stopPropagation()})),e.addEventListener("click",(function(){x.doOnModalClick&&x.doOnModalClick()}))),e},k={},x={modalFade:!0,getInstance:function(e){return k[e]},register:function(e,t){e&&t&&(k[e]=t)},deregister:function(e){e&&(k[e]=null,delete k[e])},nextZIndex:function(){return x.zIndex++},modalStack:[],doOnModalClick:function(){const e=x.modalStack[x.modalStack.length-1];if(!e)return;const t=x.getInstance(e.id);t&&t.closeOnClickModal&&t.close()},openModal:function(e,t,n,s,o){if(i.default.prototype.$isServer)return;if(!e||void 0===t)return;this.modalFade=o;const a=this.modalStack;for(let t=0,n=a.length;t<n;t++){if(a[t].id===e)return}const l=w();if(h(l,"v-modal"),this.modalFade&&!_&&h(l,"v-modal-enter"),s){s.trim().split(/\s+/).forEach(e=>h(l,e))}setTimeout(()=>{m(l,"v-modal-enter")},200),n&&n.parentNode&&11!==n.parentNode.nodeType?n.parentNode.appendChild(l):document.body.appendChild(l),t&&(l.style.zIndex=t),l.tabIndex=0,l.style.display="",this.modalStack.push({id:e,zIndex:t,modalClass:s})},closeModal:function(e){const t=this.modalStack,n=w();if(t.length>0){const i=t[t.length-1];if(i.id===e){if(i.modalClass){i.modalClass.trim().split(/\s+/).forEach(e=>m(n,e))}t.pop(),t.length>0&&(n.style.zIndex=t[t.length-1].zIndex)}else for(let n=t.length-1;n>=0;n--)if(t[n].id===e){t.splice(n,1);break}}0===t.length&&(this.modalFade&&h(n,"v-modal-leave"),setTimeout(()=>{0===t.length&&(n.parentNode&&n.parentNode.removeChild(n),n.style.display="none",x.modalDom=void 0),m(n,"v-modal-leave")},200))}};Object.defineProperty(x,"zIndex",{configurable:!0,get:()=>(y||(v=v||(i.default.prototype.$ELEMENT||{}).zIndex||2e3,y=!0),v),set(e){v=e}});i.default.prototype.$isServer||window.addEventListener("keydown",(function(e){if(27===e.keyCode){const e=function(){if(!i.default.prototype.$isServer&&x.modalStack.length>0){const e=x.modalStack[x.modalStack.length-1];if(!e)return;return x.getInstance(e.id)}}();e&&e.closeOnPressEscape&&(e.handleClose?e.handleClose():e.handleAction?e.handleAction("cancel"):e.close())}}));var C=x;let b;let I,S=1;Boolean,Boolean,Boolean,Boolean,Boolean,Boolean,Boolean;const L={CONTAIN:{name:"contain",icon:"el-icon-full-screen"},ORIGINAL:{name:"original",icon:"el-icon-c-scale-to-original"}},z=!i.default.prototype.$isServer&&window.navigator.userAgent.match(/firefox/i)?"DOMMouseScroll":"mousewheel";var F={name:"elImageViewer",props:{urlList:{type:Array,default:()=>[]},zIndex:{type:Number,default:2e3},onSwitch:{type:Function,default:()=>{}},onClose:{type:Function,default:()=>{}},initialIndex:{type:Number,default:0},appendToBody:{type:Boolean,default:!0},maskClosable:{type:Boolean,default:!0}},data(){return{index:this.initialIndex,isShow:!1,infinite:!0,loading:!1,mode:L.CONTAIN,transform:{scale:.75,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}},computed:{isSingle(){return this.urlList.length<=1},isFirst(){return 0===this.index},isLast(){return this.index===this.urlList.length-1},currentImg(){return this.urlList[this.index]},imgStyle(){const{scale:e,deg:t,offsetX:n,offsetY:i,enableTransition:s}=this.transform,o={transform:`scale(${e}) rotate(${t}deg)`,transition:s?"transform .3s":"","margin-left":n+"px","margin-top":i+"px"};return this.mode===L.CONTAIN&&(o.maxWidth=o.maxHeight="100%"),o},viewerZIndex(){const e=C.nextZIndex();return this.zIndex>e?this.zIndex:e}},watch:{index:{handler:function(e){this.reset(),this.onSwitch(e)}},currentImg(e){this.$nextTick(e=>{this.$refs.img[0].complete||(this.loading=!0)})}},methods:{hide(){this.deviceSupportUninstall(),this.onClose()},deviceSupportInstall(){this._keyDownHandler=e=>{e.stopPropagation();switch(e.keyCode){case 27:this.hide();break;case 32:this.toggleMode();break;case 37:this.prev();break;case 38:this.handleActions("zoomIn");break;case 39:this.next();break;case 40:this.handleActions("zoomOut")}},this._mouseWheelHandler=g(e=>{(e.wheelDelta?e.wheelDelta:-e.detail)>0?this.handleActions("zoomIn",{zoomRate:.015,enableTransition:!1}):this.handleActions("zoomOut",{zoomRate:.015,enableTransition:!1})}),c(document,"keydown",this._keyDownHandler),c(document,z,this._mouseWheelHandler)},deviceSupportUninstall(){d(document,"keydown",this._keyDownHandler),d(document,z,this._mouseWheelHandler),this._keyDownHandler=null,this._mouseWheelHandler=null},handleImgLoad(e){this.loading=!1},handleImgError(e){this.loading=!1,e.target.alt="加载失败"},handleMouseDown(e){if(this.loading||0!==e.button)return;const{offsetX:t,offsetY:n}=this.transform,i=e.pageX,s=e.pageY;this._dragHandler=g(e=>{this.transform.offsetX=t+e.pageX-i,this.transform.offsetY=n+e.pageY-s}),c(document,"mousemove",this._dragHandler),c(document,"mouseup",e=>{d(document,"mousemove",this._dragHandler)}),e.preventDefault()},handleMaskClick(){this.maskClosable&&this.hide()},reset(){this.transform={scale:.75,deg:0,offsetX:0,offsetY:0,enableTransition:!1}},toggleMode(){if(this.loading)return;const e=Object.keys(L),t=(Object.values(L).indexOf(this.mode)+1)%e.length;this.mode=L[e[t]],this.reset()},prev(){if(this.isFirst&&!this.infinite)return;const e=this.urlList.length;this.index=(this.index-1+e)%e},next(){if(this.isLast&&!this.infinite)return;const e=this.urlList.length;this.index=(this.index+1)%e},handleActions(e,t={}){if(this.loading)return;const{zoomRate:n,rotateDeg:i,enableTransition:s}={zoomRate:.2,rotateDeg:90,enableTransition:!0,...t},{transform:o}=this;switch(e){case"zoomOut":o.scale>.2&&(o.scale=parseFloat((o.scale-n).toFixed(3)));break;case"zoomIn":o.scale=parseFloat((o.scale+n).toFixed(3));break;case"clocelise":o.deg+=i;break;case"anticlocelise":o.deg-=i}o.enableTransition=s}},mounted(){this.deviceSupportInstall(),this.appendToBody&&document.body.appendChild(this.$el),this.$refs["el-image-viewer__wrapper"].focus()},destroyed(){this.appendToBody&&this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)}},N=n(39),O=Object(N.a)(F,(function(){var e=this,t=e._self._c;return t("transition",{attrs:{name:"viewer-fade"}},[t("div",{ref:"el-image-viewer__wrapper",staticClass:"el-image-viewer__wrapper",style:{"z-index":e.viewerZIndex},attrs:{tabindex:"-1"}},[t("div",{staticClass:"el-image-viewer__mask",on:{click:function(t){return t.target!==t.currentTarget?null:e.handleMaskClick.apply(null,arguments)}}}),e._v(" "),t("span",{staticClass:"el-image-viewer__btn el-image-viewer__close",on:{click:e.hide}},[t("i",{staticClass:"el-icon-close"})]),e._v(" "),e.isSingle?e._e():[t("span",{staticClass:"el-image-viewer__btn el-image-viewer__prev",class:{"is-disabled":!e.infinite&&e.isFirst},on:{click:e.prev}},[t("i",{staticClass:"el-icon-arrow-left"})]),e._v(" "),t("span",{staticClass:"el-image-viewer__btn el-image-viewer__next",class:{"is-disabled":!e.infinite&&e.isLast},on:{click:e.next}},[t("i",{staticClass:"el-icon-arrow-right"})])],e._v(" "),t("div",{staticClass:"el-image-viewer__btn el-image-viewer__actions"},[t("div",{staticClass:"el-image-viewer__actions__inner"},[t("i",{staticClass:"el-icon-zoom-out",on:{click:function(t){return e.handleActions("zoomOut")}}}),e._v(" "),t("i",{staticClass:"el-icon-zoom-in",on:{click:function(t){return e.handleActions("zoomIn")}}}),e._v(" "),t("i",{staticClass:"el-image-viewer__actions__divider"}),e._v(" "),t("i",{class:e.mode.icon,on:{click:e.toggleMode}}),e._v(" "),t("i",{staticClass:"el-image-viewer__actions__divider"}),e._v(" "),t("i",{staticClass:"el-icon-refresh-left",on:{click:function(t){return e.handleActions("anticlocelise")}}}),e._v(" "),t("i",{staticClass:"el-icon-refresh-right",on:{click:function(t){return e.handleActions("clocelise")}}})])]),e._v(" "),t("div",{staticClass:"el-image-viewer__canvas"},e._l(e.urlList,(function(n,i){return t("div",{key:n,staticClass:"mid-part"},[i===e.index?t("img",{ref:"img",refInFor:!0,staticClass:"el-image-viewer__img",style:e.imgStyle,attrs:{src:e.currentImg,referrerpolicy:"no-referrer"},on:{load:e.handleImgLoad,error:e.handleImgError,mousedown:e.handleMouseDown}}):e._e()])})),0)],2)])}),[],!1,null,null,null);t.default=O.exports}}]);